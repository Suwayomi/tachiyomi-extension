fragment MangaFragment on MangaType {
    artist
    author
    description
    id
    status
    thumbnailUrl
    title
    url
    genre
    inLibraryAt
    chapters {
        totalCount
    }
    latestUploadedChapter {
        uploadDate
    }
    latestFetchedChapter {
        fetchedAt
    }
    latestReadChapter {
        lastReadAt
        chapterNumber
    }
    unreadCount
    downloadCount
}

mutation GetManga($mangaId: Int!) {
    fetchManga(input: {id: $mangaId}) {
        manga {
            ...MangaFragment
        }
    }
}

query GetMangaState($mangaId: Int!) {
    manga(id: $mangaId) {
        ...MangaFragment
    }
}

query SearchManga($filter: [MangaFilterInput!]) {
    mangas(
        condition: {inLibrary: true},
        filter: {
            and: $filter
        }
    ) {
        nodes {
            ...MangaFragment
        }
    }
}

query GetMangaUnreadChapters($mangaId: Int!) {
  chapters(condition: {mangaId: $mangaId, isRead: false}) {
    nodes {
      id
      chapterNumber
    }
  }
}

mutation TrackManga($mangaId: Int!) {
  trackProgress(input: {mangaId: $mangaId}) {
    trackRecords {
      lastChapterRead
    }
  }
}
